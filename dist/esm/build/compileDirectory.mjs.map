{"version":3,"sources":["compileDirectory.js"],"sourcesContent":["const path = require('node:path');\nconst Iterator = require('fs-iterator');\nconst getTS = require('get-tsconfig-compat');\nconst { createMatcher } = require('ts-swc-loaders');\n\nconst source = require('../lib/source');\nconst compileFile = require('./compileFile');\n\nmodule.exports = function compileDirectory(options, cb) {\n  const cwd = options.cwd || process.cwd();\n  const src = source(options);\n  const srcFolder = path.dirname(path.resolve(cwd, src));\n\n  const config = getTS.getTsconfig(path.resolve(cwd, 'tsconfig.json'));\n  const matcher = createMatcher(config);\n\n  options = { ...options, config };\n  const iterator = new Iterator(srcFolder);\n  iterator.forEach(\n    (entry, callback) => {\n      if (!entry.stats.isFile()) return callback();\n      if (!matcher(entry.fullPath)) return callback();\n      compileFile(entry, options, callback);\n    },\n    { callbacks: true, concurrency: 1024 },\n    cb\n  );\n};\n"],"names":["path","require","Iterator","getTS","createMatcher","source","compileFile","module","exports","compileDirectory","options","cb","cwd","process","src","srcFolder","dirname","resolve","config","getTsconfig","matcher","iterator","forEach","entry","callback","stats","isFile","fullPath","callbacks","concurrency"],"mappings":"AAAA,MAAMA,OAAOC,QAAQ;AACrB,MAAMC,WAAWD,QAAQ;AACzB,MAAME,QAAQF,QAAQ;AACtB,MAAM,EAAEG,aAAa,EAAE,GAAGH,QAAQ;AAElC,MAAMI,SAASJ,QAAQ;AACvB,MAAMK,cAAcL,QAAQ;AAE5BM,OAAOC,OAAO,GAAG,SAASC,iBAAiBC,OAAO,EAAEC,EAAE;IACpD,MAAMC,MAAMF,QAAQE,GAAG,IAAIC,QAAQD,GAAG;IACtC,MAAME,MAAMT,OAAOK;IACnB,MAAMK,YAAYf,KAAKgB,OAAO,CAAChB,KAAKiB,OAAO,CAACL,KAAKE;IAEjD,MAAMI,SAASf,MAAMgB,WAAW,CAACnB,KAAKiB,OAAO,CAACL,KAAK;IACnD,MAAMQ,UAAUhB,cAAcc;IAE9BR,UAAU;QAAE,GAAGA,OAAO;QAAEQ;IAAO;IAC/B,MAAMG,WAAW,IAAInB,SAASa;IAC9BM,SAASC,OAAO,CACd,CAACC,OAAOC;QACN,IAAI,CAACD,MAAME,KAAK,CAACC,MAAM,IAAI,OAAOF;QAClC,IAAI,CAACJ,QAAQG,MAAMI,QAAQ,GAAG,OAAOH;QACrClB,YAAYiB,OAAOb,SAASc;IAC9B,GACA;QAAEI,WAAW;QAAMC,aAAa;IAAK,GACrClB;AAEJ"}