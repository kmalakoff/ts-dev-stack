{"version":3,"sources":["unlink.js"],"sourcesContent":["const path = require('node:path');\nconst fs = require('node:fs');\nconst Queue = require('queue-cb');\n\nfunction removeLink(installPath, cb) {\n  fs.unlink(installPath, cb);\n}\n\nmodule.exports = function unlink(installPath, cb) {\n  const movedPath = path.join(path.dirname(installPath), `${path.basename(installPath)}.tsds`);\n  const queue = new Queue(1);\n  queue.defer(removeLink.bind(null, installPath));\n  queue.defer(fs.rename.bind(null, movedPath, installPath));\n  queue.await(() => {\n    cb();\n  });\n};\n"],"names":["path","require","fs","Queue","removeLink","installPath","cb","unlink","module","exports","movedPath","join","dirname","basename","queue","defer","bind","rename","await"],"mappings":";AAAA,IAAMA,OAAOC,QAAQ;AACrB,IAAMC,KAAKD,QAAQ;AACnB,IAAME,QAAQF,QAAQ;AAEtB,SAASG,WAAWC,WAAW,EAAEC,EAAE;IACjCJ,GAAGK,MAAM,CAACF,aAAaC;AACzB;AAEAE,OAAOC,OAAO,GAAG,SAASF,OAAOF,WAAW,EAAEC,EAAE;IAC9C,IAAMI,YAAYV,KAAKW,IAAI,CAACX,KAAKY,OAAO,CAACP,cAAc,AAAC,GAA6B,OAA3BL,KAAKa,QAAQ,CAACR,cAAa;IACrF,IAAMS,QAAQ,IAAIX,MAAM;IACxBW,MAAMC,KAAK,CAACX,WAAWY,IAAI,CAAC,MAAMX;IAClCS,MAAMC,KAAK,CAACb,GAAGe,MAAM,CAACD,IAAI,CAAC,MAAMN,WAAWL;IAC5CS,MAAMI,KAAK,CAAC;QACVZ;IACF;AACF"}