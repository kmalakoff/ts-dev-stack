{"version":3,"sources":["index.mjs"],"sourcesContent":["import fs from 'fs';\nimport path from 'path';\nimport resolve from '@rollup/plugin-node-resolve';\nimport terser from '@rollup/plugin-terser';\nimport camelcase from 'lodash.camelcase';\nimport externals from 'rollup-plugin-node-externals';\nimport swc from './swc.mjs';\n\nconst pkg = JSON.parse(fs.readFileSync(path.join(process.cwd(), 'package.json'), 'utf8'));\nconst globals = pkg.tsds ? pkg.tsds.globals || {} : {};\n\nconst DEPS = ['dependencies', 'optionalDependencies', 'peerDependencies'];\nDEPS.forEach((x) => {\n  const deps = pkg[x] || {};\n  for (const name in deps) {\n    if (globals[name] === undefined) console.log(`umd dependency ${name}is missing. Add a \"tsds\": { \"globals\": { \\\"${name}\\\": \"SomeName\" } } to your package.json`);\n  }\n});\n\nexport default {\n  output: [\n    {\n      file: path.resolve(process.cwd(), 'dist', 'umd', `${pkg.name}.js`),\n      format: 'umd',\n      sourcemap: true,\n      name: camelcase(pkg.name),\n      globals: globals,\n    },\n    {\n      file: path.resolve(process.cwd(), 'dist', 'umd', `${pkg.name}.min.js`),\n      format: 'umd',\n      name: camelcase(pkg.name),\n      sourcemap: true,\n      plugins: [terser()],\n      globals: globals,\n    },\n  ],\n  plugins: [externals({ devDeps: false }), resolve(), swc()],\n};\n"],"names":["fs","path","resolve","terser","camelcase","externals","swc","pkg","JSON","parse","readFileSync","join","process","cwd","globals","tsds","DEPS","forEach","x","deps","name","undefined","console","log","output","file","format","sourcemap","plugins","devDeps"],"mappings":"AAAA,OAAOA,QAAQ,KAAK;AACpB,OAAOC,UAAU,OAAO;AACxB,OAAOC,aAAa,8BAA8B;AAClD,OAAOC,YAAY,wBAAwB;AAC3C,OAAOC,eAAe,mBAAmB;AACzC,OAAOC,eAAe,+BAA+B;AACrD,OAAOC,SAAS,YAAY;AAE5B,MAAMC,MAAMC,KAAKC,KAAK,CAACT,GAAGU,YAAY,CAACT,KAAKU,IAAI,CAACC,QAAQC,GAAG,IAAI,iBAAiB;AACjF,MAAMC,UAAUP,IAAIQ,IAAI,GAAGR,IAAIQ,IAAI,CAACD,OAAO,IAAI,CAAC,IAAI,CAAC;AAErD,MAAME,OAAO;IAAC;IAAgB;IAAwB;CAAmB;AACzEA,KAAKC,OAAO,CAAC,CAACC;IACZ,MAAMC,OAAOZ,GAAG,CAACW,EAAE,IAAI,CAAC;IACxB,IAAK,MAAME,QAAQD,KAAM;QACvB,IAAIL,OAAO,CAACM,KAAK,KAAKC,WAAWC,QAAQC,GAAG,CAAC,CAAC,eAAe,EAAEH,KAAK,2CAA2C,EAAEA,KAAK,uCAAuC,CAAC;IAChK;AACF;AAEA,eAAe;IACbI,QAAQ;QACN;YACEC,MAAMxB,KAAKC,OAAO,CAACU,QAAQC,GAAG,IAAI,QAAQ,OAAO,GAAGN,IAAIa,IAAI,CAAC,GAAG,CAAC;YACjEM,QAAQ;YACRC,WAAW;YACXP,MAAMhB,UAAUG,IAAIa,IAAI;YACxBN,SAASA;QACX;QACA;YACEW,MAAMxB,KAAKC,OAAO,CAACU,QAAQC,GAAG,IAAI,QAAQ,OAAO,GAAGN,IAAIa,IAAI,CAAC,OAAO,CAAC;YACrEM,QAAQ;YACRN,MAAMhB,UAAUG,IAAIa,IAAI;YACxBO,WAAW;YACXC,SAAS;gBAACzB;aAAS;YACnBW,SAASA;QACX;KACD;IACDc,SAAS;QAACvB,UAAU;YAAEwB,SAAS;QAAM;QAAI3B;QAAWI;KAAM;AAC5D,EAAE"}