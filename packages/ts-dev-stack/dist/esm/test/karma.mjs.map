{"version":3,"sources":["karma.js"],"sourcesContent":["const path = require('path');\nconst Queue = require('queue-cb');\nconst { link, installPath, spawn } = require('tsds-lib');\n\nmodule.exports = function karma(args, options, cb) {\n  link(installPath(options), (_err, restore) => {\n    const queue = new Queue(1);\n    queue.defer((cb) => {\n      const tests = args.length ? args[0] : 'test/**/*.test.*';\n      spawn('karma', ['start', path.join(__dirname, '..', '..', '..', 'assets', 'karma.conf.js'), tests], {}, cb);\n    });\n    queue.await((err) => {\n      restore((err2) => {\n        cb(err || err2);\n      });\n    });\n  });\n};\n"],"names":["path","require","Queue","link","installPath","spawn","module","exports","karma","args","options","cb","_err","restore","queue","defer","tests","length","join","__dirname","await","err","err2"],"mappings":"AAAA,MAAMA,OAAOC,QAAQ;AACrB,MAAMC,QAAQD,QAAQ;AACtB,MAAM,EAAEE,IAAI,EAAEC,WAAW,EAAEC,KAAK,EAAE,GAAGJ,QAAQ;AAE7CK,OAAOC,OAAO,GAAG,SAASC,MAAMC,IAAI,EAAEC,OAAO,EAAEC,EAAE;IAC/CR,KAAKC,YAAYM,UAAU,CAACE,MAAMC;QAChC,MAAMC,QAAQ,IAAIZ,MAAM;QACxBY,MAAMC,KAAK,CAAC,CAACJ;YACX,MAAMK,QAAQP,KAAKQ,MAAM,GAAGR,IAAI,CAAC,EAAE,GAAG;YACtCJ,MAAM,SAAS;gBAAC;gBAASL,KAAKkB,IAAI,CAACC,WAAW,MAAM,MAAM,MAAM,UAAU;gBAAkBH;aAAM,EAAE,CAAC,GAAGL;QAC1G;QACAG,MAAMM,KAAK,CAAC,CAACC;YACXR,QAAQ,CAACS;gBACPX,GAAGU,OAAOC;YACZ;QACF;IACF;AACF"}