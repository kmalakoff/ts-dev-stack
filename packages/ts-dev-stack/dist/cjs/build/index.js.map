{"version":3,"sources":["index.mjs"],"sourcesContent":["import path from 'path';\nimport Queue from 'queue-cb';\nimport rimraf2 from 'rimraf2';\nimport { targets } from 'tsds-lib';\nimport cjs from './cjs.mjs';\nimport esm from './esm.mjs';\nimport types from './types.mjs';\nimport umd from './umd.mjs';\n\nexport default function build(args, options, cb) {\n  const targs = targets(options);\n\n  const cwd = options.cwd || process.cwd();\n  rimraf2(path.join(cwd, 'dist'), { disableGlob: true }, () => {\n    const queue = new Queue(1);\n    targs.indexOf('cjs') < 0 || queue.defer(cjs.bind(null, args, options));\n    targs.indexOf('esm') < 0 || queue.defer(esm.bind(null, args, options));\n    targs.indexOf('umd') < 0 || queue.defer(umd.bind(null, args, options));\n    queue.defer(types.bind(null, args, options));\n    queue.await(cb);\n  });\n}\n"],"names":["build","args","options","cb","targs","targets","cwd","process","rimraf2","path","join","disableGlob","queue","Queue","indexOf","defer","cjs","bind","esm","umd","types","await"],"mappings":";;;;+BASA;;;eAAwBA;;;2DATP;8DACC;8DACE;uBACI;0DACR;0DACA;4DACE;0DACF;;;;;;AAED,SAASA,MAAMC,IAAI,EAAEC,OAAO,EAAEC,EAAE;IAC7C,IAAMC,QAAQC,IAAAA,gBAAO,EAACH;IAEtB,IAAMI,MAAMJ,QAAQI,GAAG,IAAIC,QAAQD,GAAG;IACtCE,IAAAA,gBAAO,EAACC,aAAI,CAACC,IAAI,CAACJ,KAAK,SAAS;QAAEK,aAAa;IAAK,GAAG;QACrD,IAAMC,QAAQ,IAAIC,gBAAK,CAAC;QACxBT,MAAMU,OAAO,CAAC,SAAS,KAAKF,MAAMG,KAAK,CAACC,YAAG,CAACC,IAAI,CAAC,MAAMhB,MAAMC;QAC7DE,MAAMU,OAAO,CAAC,SAAS,KAAKF,MAAMG,KAAK,CAACG,YAAG,CAACD,IAAI,CAAC,MAAMhB,MAAMC;QAC7DE,MAAMU,OAAO,CAAC,SAAS,KAAKF,MAAMG,KAAK,CAACI,YAAG,CAACF,IAAI,CAAC,MAAMhB,MAAMC;QAC7DU,MAAMG,KAAK,CAACK,cAAK,CAACH,IAAI,CAAC,MAAMhB,MAAMC;QACnCU,MAAMS,KAAK,CAAClB;IACd;AACF"}