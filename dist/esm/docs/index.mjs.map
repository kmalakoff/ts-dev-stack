{"version":3,"sources":["index.js"],"sourcesContent":["const path = require('path');\nconst fs = require('fs');\nconst rimraf = require('rimraf');\nconst mkdirp = require('mkdirp');\nconst Queue = require('queue-cb');\nconst spawn = require('../lib/spawn');\nconst source = require('../lib/source');\n\nmodule.exports = function docs(_args, options, cb) {\n  const cwd = options.cwd || process.cwd();\n  const src = source(options);\n  const dest = path.resolve(cwd, 'docs');\n  const tsConfigDocsPath = path.join(cwd, 'tsconfig.docs.json');\n\n  rimraf(dest, () => {\n    const queue = new Queue(1);\n    queue.defer(mkdirp.bind(null, dest));\n\n    queue.defer((cb) => {\n      const tsConfig = require(path.join(cwd, 'tsconfig.json'));\n      tsConfig.include = (tsConfig.include || []).filter((x) => x.indexOf('test') !== 0);\n      fs.writeFile(tsConfigDocsPath, JSON.stringify(tsConfig), 'utf8', cb);\n    });\n\n    queue.defer(spawn.bind(null, 'typedoc', ['--tsconfig', tsConfigDocsPath, '--includeVersion', src], { cwd }));\n    queue.defer(fs.unlink.bind(null, tsConfigDocsPath));\n    queue.await(cb);\n  });\n};\n"],"names":["path","require","fs","rimraf","mkdirp","Queue","spawn","source","module","exports","docs","_args","options","cb","cwd","process","src","dest","resolve","tsConfigDocsPath","join","queue","defer","bind","tsConfig","include","filter","x","indexOf","writeFile","JSON","stringify","unlink","await"],"mappings":"AAAA,MAAMA,OAAOC,QAAQ;AACrB,MAAMC,KAAKD,QAAQ;AACnB,MAAME,SAASF,QAAQ;AACvB,MAAMG,SAASH,QAAQ;AACvB,MAAMI,QAAQJ,QAAQ;AACtB,MAAMK,QAAQL,QAAQ;AACtB,MAAMM,SAASN,QAAQ;AAEvBO,OAAOC,OAAO,GAAG,SAASC,KAAKC,KAAK,EAAEC,OAAO,EAAEC,EAAE;IAC/C,MAAMC,MAAMF,QAAQE,GAAG,IAAIC,QAAQD,GAAG;IACtC,MAAME,MAAMT,OAAOK;IACnB,MAAMK,OAAOjB,KAAKkB,OAAO,CAACJ,KAAK;IAC/B,MAAMK,mBAAmBnB,KAAKoB,IAAI,CAACN,KAAK;IAExCX,OAAOc,MAAM;QACX,MAAMI,QAAQ,IAAIhB,MAAM;QACxBgB,MAAMC,KAAK,CAAClB,OAAOmB,IAAI,CAAC,MAAMN;QAE9BI,MAAMC,KAAK,CAAC,CAACT;YACX,MAAMW,WAAWvB,QAAQD,KAAKoB,IAAI,CAACN,KAAK;YACxCU,SAASC,OAAO,GAAG,AAACD,CAAAA,SAASC,OAAO,IAAI,EAAE,AAAD,EAAGC,MAAM,CAAC,CAACC,IAAMA,EAAEC,OAAO,CAAC,YAAY;YAChF1B,GAAG2B,SAAS,CAACV,kBAAkBW,KAAKC,SAAS,CAACP,WAAW,QAAQX;QACnE;QAEAQ,MAAMC,KAAK,CAAChB,MAAMiB,IAAI,CAAC,MAAM,WAAW;YAAC;YAAcJ;YAAkB;YAAoBH;SAAI,EAAE;YAAEF;QAAI;QACzGO,MAAMC,KAAK,CAACpB,GAAG8B,MAAM,CAACT,IAAI,CAAC,MAAMJ;QACjCE,MAAMY,KAAK,CAACpB;IACd;AACF"}