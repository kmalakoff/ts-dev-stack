{"version":3,"sources":["index.js"],"sourcesContent":["var fs = require('fs');\nvar path = require('path');\nvar rimraf = require('rimraf');\nvar assign = require('just-extend');\nvar Queue = require('queue-cb');\n\nvar spawn = require('../../lib/spawn');\nvar source = require('../../lib/source');\n\nmodule.exports = function umd(_args, options, cb) {\n  var cwd = options.cwd || process.cwd();\n  var src = path.resolve(cwd, source(options));\n\n  options = assign({}, options);\n  options.type = 'umd';\n  options.sourceMaps = true;\n  options.dest = path.join(cwd, 'dist', 'umd');\n  rimraf(options.dest, function () {\n    var queue = new Queue(1);\n    queue.defer(spawn.bind(null, 'rollup', ['--config', path.join(__dirname, 'rollup-umd.cjs'), '--input', src], { cwd: cwd }));\n    queue.defer(fs.writeFile.bind(null, path.join(options.dest, 'package.json'), '{\"type\":\"commonjs\"}'));\n    queue.await(cb);\n  });\n};\n"],"names":["fs","require","path","rimraf","assign","Queue","spawn","source","module","exports","umd","_args","options","cb","cwd","process","src","resolve","type","sourceMaps","dest","join","queue","defer","bind","__dirname","writeFile","await"],"mappings":";AAAA,IAAIA,KAAKC,QAAQ;AACjB,IAAIC,OAAOD,QAAQ;AACnB,IAAIE,SAASF,QAAQ;AACrB,IAAIG,SAASH,QAAQ;AACrB,IAAII,QAAQJ,QAAQ;AAEpB,IAAIK,QAAQL,QAAQ;AACpB,IAAIM,SAASN,QAAQ;AAErBO,OAAOC,OAAO,GAAG,SAASC,IAAIC,KAAK,EAAEC,OAAO,EAAEC,EAAE;IAC9C,IAAIC,MAAMF,QAAQE,GAAG,IAAIC,QAAQD,GAAG;IACpC,IAAIE,MAAMd,KAAKe,OAAO,CAACH,KAAKP,OAAOK;IAEnCA,UAAUR,OAAO,CAAC,GAAGQ;IACrBA,QAAQM,IAAI,GAAG;IACfN,QAAQO,UAAU,GAAG;IACrBP,QAAQQ,IAAI,GAAGlB,KAAKmB,IAAI,CAACP,KAAK,QAAQ;IACtCX,OAAOS,QAAQQ,IAAI,EAAE;QACnB,IAAIE,QAAQ,IAAIjB,MAAM;QACtBiB,MAAMC,KAAK,CAACjB,MAAMkB,IAAI,CAAC,MAAM,UAAU;YAAC;YAAYtB,KAAKmB,IAAI,CAACI,WAAW;YAAmB;YAAWT;SAAI,EAAE;YAAEF,KAAKA;QAAI;QACxHQ,MAAMC,KAAK,CAACvB,GAAG0B,SAAS,CAACF,IAAI,CAAC,MAAMtB,KAAKmB,IAAI,CAACT,QAAQQ,IAAI,EAAE,iBAAiB;QAC7EE,MAAMK,KAAK,CAACd;IACd;AACF"}