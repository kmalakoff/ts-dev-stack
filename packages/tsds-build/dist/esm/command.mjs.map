{"version":3,"sources":["command.mjs"],"sourcesContent":["import path from 'path';\nimport Queue from 'queue-cb';\nimport rimraf2 from 'rimraf2';\nimport { targets } from 'tsds-lib';\nimport cjs from './build/cjs.mjs';\nimport esm from './build/esm.mjs';\nimport types from './build/types.mjs';\nimport umd from './build/umd.mjs';\n\nexport default function build(args, options, cb) {\n  const targs = targets(options);\n\n  const cwd = options.cwd || process.cwd();\n  rimraf2(path.join(cwd, 'dist'), { disableGlob: true }, () => {\n    const queue = new Queue(1);\n    targs.indexOf('cjs') < 0 || queue.defer(cjs.bind(null, args, options));\n    targs.indexOf('esm') < 0 || queue.defer(esm.bind(null, args, options));\n    targs.indexOf('umd') < 0 || queue.defer(umd.bind(null, args, options));\n    queue.defer(types.bind(null, args, options));\n    queue.await(cb);\n  });\n}\n"],"names":["path","Queue","rimraf2","targets","cjs","esm","types","umd","build","args","options","cb","targs","cwd","process","join","disableGlob","queue","indexOf","defer","bind","await"],"mappings":"AAAA,OAAOA,UAAU,OAAO;AACxB,OAAOC,WAAW,WAAW;AAC7B,OAAOC,aAAa,UAAU;AAC9B,SAASC,OAAO,QAAQ,WAAW;AACnC,OAAOC,SAAS,kBAAkB;AAClC,OAAOC,SAAS,kBAAkB;AAClC,OAAOC,WAAW,oBAAoB;AACtC,OAAOC,SAAS,kBAAkB;AAElC,eAAe,SAASC,MAAMC,IAAI,EAAEC,OAAO,EAAEC,EAAE;IAC7C,MAAMC,QAAQT,QAAQO;IAEtB,MAAMG,MAAMH,QAAQG,GAAG,IAAIC,QAAQD,GAAG;IACtCX,QAAQF,KAAKe,IAAI,CAACF,KAAK,SAAS;QAAEG,aAAa;IAAK,GAAG;QACrD,MAAMC,QAAQ,IAAIhB,MAAM;QACxBW,MAAMM,OAAO,CAAC,SAAS,KAAKD,MAAME,KAAK,CAACf,IAAIgB,IAAI,CAAC,MAAMX,MAAMC;QAC7DE,MAAMM,OAAO,CAAC,SAAS,KAAKD,MAAME,KAAK,CAACd,IAAIe,IAAI,CAAC,MAAMX,MAAMC;QAC7DE,MAAMM,OAAO,CAAC,SAAS,KAAKD,MAAME,KAAK,CAACZ,IAAIa,IAAI,CAAC,MAAMX,MAAMC;QAC7DO,MAAME,KAAK,CAACb,MAAMc,IAAI,CAAC,MAAMX,MAAMC;QACnCO,MAAMI,KAAK,CAACV;IACd;AACF"}