{"version":3,"sources":["cli.js"],"sourcesContent":["var getopts = require('getopts-compat');\nvar exit = require('exit');\nvar assign = require('just-extend');\n\nvar commands = {\n  build: require('./build'),\n  coverage: require('./test/c8'),\n  deploy: require('./deploy'),\n  docs: require('./docs'),\n  format: require('./quality/format'),\n  link: require('./link'),\n  test: require('./test'),\n  'test:node': require('./test/mocha'),\n  'test:browser': require('./test/karma'),\n  unlink: require('./unlink'),\n  version: require('./deploy/version'),\n};\n\nmodule.exports = function cli(argv, name) {\n  if (argv.length === 0) {\n    console.log('Command missing' + name + ' ' + argv.join(','));\n    return exit(-1);\n  }\n\n  var command = commands[argv[0]];\n  if (!command) {\n    console.log('Unrecognized command: ' + argv.join(' '));\n    return exit(-1);\n  }\n\n  var options = getopts(argv.slice(1), assign({ stopEarly: true }, command.options || {}));\n  var args = argv.slice(0, 1).concat(options._);\n\n  command(args.slice(1), options, function (err) {\n    if (err) {\n      console.log(err.message);\n      return exit(err.code || -1);\n    }\n    exit(0);\n  });\n};\n"],"names":["getopts","require","exit","assign","commands","build","coverage","deploy","docs","format","link","test","unlink","version","module","exports","cli","argv","name","length","console","log","join","command","options","slice","stopEarly","args","concat","_","err","message","code"],"mappings":";AAAA,IAAIA,UAAUC,QAAQ;AACtB,IAAIC,OAAOD,QAAQ;AACnB,IAAIE,SAASF,QAAQ;AAErB,IAAIG,WAAW;IACbC,OAAOJ,QAAQ;IACfK,UAAUL,QAAQ;IAClBM,QAAQN,QAAQ;IAChBO,MAAMP,QAAQ;IACdQ,QAAQR,QAAQ;IAChBS,MAAMT,QAAQ;IACdU,MAAMV,QAAQ;IACd,aAAaA,QAAQ;IACrB,gBAAgBA,QAAQ;IACxBW,QAAQX,QAAQ;IAChBY,SAASZ,QAAQ;AACnB;AAEAa,OAAOC,OAAO,GAAG,SAASC,IAAIC,IAAI,EAAEC,IAAI;IACtC,IAAID,KAAKE,MAAM,KAAK,GAAG;QACrBC,QAAQC,GAAG,CAAC,oBAAoBH,OAAO,MAAMD,KAAKK,IAAI,CAAC;QACvD,OAAOpB,KAAK,CAAC;IACf;IAEA,IAAIqB,UAAUnB,QAAQ,CAACa,IAAI,CAAC,EAAE,CAAC;IAC/B,IAAI,CAACM,SAAS;QACZH,QAAQC,GAAG,CAAC,2BAA2BJ,KAAKK,IAAI,CAAC;QACjD,OAAOpB,KAAK,CAAC;IACf;IAEA,IAAIsB,UAAUxB,QAAQiB,KAAKQ,KAAK,CAAC,IAAItB,OAAO;QAAEuB,WAAW;IAAK,GAAGH,QAAQC,OAAO,IAAI,CAAC;IACrF,IAAIG,OAAOV,KAAKQ,KAAK,CAAC,GAAG,GAAGG,MAAM,CAACJ,QAAQK,CAAC;IAE5CN,QAAQI,KAAKF,KAAK,CAAC,IAAID,SAAS,SAAUM,GAAG;QAC3C,IAAIA,KAAK;YACPV,QAAQC,GAAG,CAACS,IAAIC,OAAO;YACvB,OAAO7B,KAAK4B,IAAIE,IAAI,IAAI,CAAC;QAC3B;QACA9B,KAAK;IACP;AACF"}