{"version":3,"sources":["compileDirectory.js"],"sourcesContent":["const path = require('path');\nconst Iterator = require('fs-iterator');\nconst assign = require('just-extend');\nconst getTS = require('get-tsconfig-compat');\nconst createMatcher = require('ts-swc-loaders/lib/createMatcher.js');\n\nconst source = require('../lib/source');\nconst compileFile = require('./compileFile');\n\nmodule.exports = function compileDirectory(options, cb) {\n  const cwd = options.cwd || process.cwd();\n  const src = source(options);\n  const srcFolder = path.dirname(path.resolve(cwd, src));\n\n  const config = getTS.getTsconfig(path.resolve(cwd, 'tsconfig.json'));\n  const matcher = createMatcher(config);\n\n  options = assign({}, options, { config: config });\n  const iterator = new Iterator(srcFolder);\n  iterator.forEach(\n    (entry, callback) => {\n      if (!entry.stats.isFile()) return callback();\n      if (!matcher(entry.fullPath)) return callback();\n      compileFile(entry, options, callback);\n    },\n    { callbacks: true, concurrency: 1024 },\n    cb\n  );\n};\n"],"names":["path","require","Iterator","assign","getTS","createMatcher","source","compileFile","module","exports","compileDirectory","options","cb","cwd","process","src","srcFolder","dirname","resolve","config","getTsconfig","matcher","iterator","forEach","entry","callback","stats","isFile","fullPath","callbacks","concurrency"],"mappings":";AAAA,IAAMA,OAAOC,QAAQ;AACrB,IAAMC,WAAWD,QAAQ;AACzB,IAAME,SAASF,QAAQ;AACvB,IAAMG,QAAQH,QAAQ;AACtB,IAAMI,gBAAgBJ,QAAQ;AAE9B,IAAMK,SAASL,QAAQ;AACvB,IAAMM,cAAcN,QAAQ;AAE5BO,OAAOC,OAAO,GAAG,SAASC,iBAAiBC,OAAO,EAAEC,EAAE;IACpD,IAAMC,MAAMF,QAAQE,GAAG,IAAIC,QAAQD,GAAG;IACtC,IAAME,MAAMT,OAAOK;IACnB,IAAMK,YAAYhB,KAAKiB,OAAO,CAACjB,KAAKkB,OAAO,CAACL,KAAKE;IAEjD,IAAMI,SAASf,MAAMgB,WAAW,CAACpB,KAAKkB,OAAO,CAACL,KAAK;IACnD,IAAMQ,UAAUhB,cAAcc;IAE9BR,UAAUR,OAAO,CAAC,GAAGQ,SAAS;QAAEQ,QAAQA;IAAO;IAC/C,IAAMG,WAAW,IAAIpB,SAASc;IAC9BM,SAASC,OAAO,CACd,SAACC,OAAOC;QACN,IAAI,CAACD,MAAME,KAAK,CAACC,MAAM,IAAI,OAAOF;QAClC,IAAI,CAACJ,QAAQG,MAAMI,QAAQ,GAAG,OAAOH;QACrClB,YAAYiB,OAAOb,SAASc;IAC9B,GACA;QAAEI,WAAW;QAAMC,aAAa;IAAK,GACrClB;AAEJ"}