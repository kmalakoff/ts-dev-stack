{"version":3,"sources":["compileDirectory.js"],"sourcesContent":["var path = require('path');\nvar Iterator = require('fs-iterator');\nvar assign = require('just-extend');\nvar getTS = require('get-tsconfig-compat');\nvar createMatcher = require('ts-swc-loaders/lib/createMatcher.js');\n\nvar source = require('../lib/source');\nvar compileFile = require('./compileFile');\n\nmodule.exports = function compileDirectory(options, cb) {\n  var cwd = options.cwd || process.cwd();\n  var src = source(options);\n  var srcFolder = path.dirname(path.resolve(cwd, src));\n\n  var config = getTS.getTsconfig(path.resolve(cwd, 'tsconfig.json'));\n  var matcher = createMatcher(config);\n\n  options = assign({}, options, { config: config });\n  var iterator = new Iterator(srcFolder);\n  iterator.forEach(\n    function (entry, callback) {\n      if (!entry.stats.isFile()) return callback();\n      if (!matcher(entry.fullPath)) return callback();\n      compileFile(entry, options, callback);\n    },\n    { callbacks: true, concurrency: 1024 },\n    cb\n  );\n};\n"],"names":["path","require","Iterator","assign","getTS","createMatcher","source","compileFile","module","exports","compileDirectory","options","cb","cwd","process","src","srcFolder","dirname","resolve","config","getTsconfig","matcher","iterator","forEach","entry","callback","stats","isFile","fullPath","callbacks","concurrency"],"mappings":";AAAA,IAAIA,OAAOC,QAAQ;AACnB,IAAIC,WAAWD,QAAQ;AACvB,IAAIE,SAASF,QAAQ;AACrB,IAAIG,QAAQH,QAAQ;AACpB,IAAII,gBAAgBJ,QAAQ;AAE5B,IAAIK,SAASL,QAAQ;AACrB,IAAIM,cAAcN,QAAQ;AAE1BO,OAAOC,OAAO,GAAG,SAASC,iBAAiBC,OAAO,EAAEC,EAAE;IACpD,IAAIC,MAAMF,QAAQE,GAAG,IAAIC,QAAQD,GAAG;IACpC,IAAIE,MAAMT,OAAOK;IACjB,IAAIK,YAAYhB,KAAKiB,OAAO,CAACjB,KAAKkB,OAAO,CAACL,KAAKE;IAE/C,IAAII,SAASf,MAAMgB,WAAW,CAACpB,KAAKkB,OAAO,CAACL,KAAK;IACjD,IAAIQ,UAAUhB,cAAcc;IAE5BR,UAAUR,OAAO,CAAC,GAAGQ,SAAS;QAAEQ,QAAQA;IAAO;IAC/C,IAAIG,WAAW,IAAIpB,SAASc;IAC5BM,SAASC,OAAO,CACd,SAAUC,KAAK,EAAEC,QAAQ;QACvB,IAAI,CAACD,MAAME,KAAK,CAACC,MAAM,IAAI,OAAOF;QAClC,IAAI,CAACJ,QAAQG,MAAMI,QAAQ,GAAG,OAAOH;QACrClB,YAAYiB,OAAOb,SAASc;IAC9B,GACA;QAAEI,WAAW;QAAMC,aAAa;IAAK,GACrClB;AAEJ"}