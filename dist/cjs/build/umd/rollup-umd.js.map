{"version":3,"sources":["rollup-umd.cjs"],"sourcesContent":["var externals = require('rollup-plugin-node-externals');\nvar resolve = require('@rollup/plugin-node-resolve').default;\nvar terser = require('rollup-plugin-terser');\nvar swc = require('./swc');\nvar camelcase = require('lodash.camelcase');\nvar assign = require('just-extend');\n\nvar path = require('path');\nvar fs = require('fs');\nvar pkg = JSON.parse(fs.readFileSync(path.join(process.cwd(), 'package.json'), 'utf8'));\n\nvar DEPS = ['', 'dependencies', 'optionalDependencies', 'peerDependencies'];\nvar deps = assign.apply(\n  null,\n  DEPS.map(function (x) {\n    return pkg[x] || {};\n  })\n);\nvar globals = pkg.tsds ? pkg.tsds.globals || {} : {};\n\nObject.keys(deps).forEach(function (x) {\n  if (globals[x] === undefined) console.log('umd dependency ' + x + 'is missing. Add a \"tsds\": { \"globals\": { \"${x}\": \"SomeName\" } } to your package.json');\n});\n\nmodule.exports = {\n  output: [\n    {\n      file: path.resolve(process.cwd(), 'dist', 'umd', pkg.name + '.js'),\n      format: 'umd',\n      sourcemap: true,\n      name: camelcase(pkg.name),\n      globals: globals,\n    },\n    {\n      file: path.resolve(process.cwd(), 'dist', 'umd', pkg.name + '.min.js'),\n      format: 'umd',\n      name: camelcase(pkg.name),\n      sourcemap: true,\n      plugins: [terser.terser()],\n      globals: globals,\n    },\n  ],\n  plugins: [externals({ devDeps: false }), resolve(), swc()],\n};\n"],"names":["externals","require","resolve","default","terser","swc","camelcase","assign","path","fs","pkg","JSON","parse","readFileSync","join","process","cwd","DEPS","deps","apply","map","x","globals","tsds","Object","keys","forEach","undefined","console","log","module","exports","output","file","name","format","sourcemap","plugins","devDeps"],"mappings":";AAAA,IAAIA,YAAYC,QAAQ;AACxB,IAAIC,UAAUD,QAAQ,+BAA+BE,OAAO;AAC5D,IAAIC,SAASH,QAAQ;AACrB,IAAII,MAAMJ,QAAQ;AAClB,IAAIK,YAAYL,QAAQ;AACxB,IAAIM,SAASN,QAAQ;AAErB,IAAIO,OAAOP,QAAQ;AACnB,IAAIQ,KAAKR,QAAQ;AACjB,IAAIS,MAAMC,KAAKC,KAAK,CAACH,GAAGI,YAAY,CAACL,KAAKM,IAAI,CAACC,QAAQC,GAAG,IAAI,iBAAiB;AAE/E,IAAIC,OAAO;IAAC;IAAI;IAAgB;IAAwB;CAAmB;AAC3E,IAAIC,OAAOX,OAAOY,KAAK,CACrB,MACAF,KAAKG,GAAG,CAAC,SAAUC,CAAC;IAClB,OAAOX,GAAG,CAACW,EAAE,IAAI,CAAC;AACpB;AAEF,IAAIC,UAAUZ,IAAIa,IAAI,GAAGb,IAAIa,IAAI,CAACD,OAAO,IAAI,CAAC,IAAI,CAAC;AAEnDE,OAAOC,IAAI,CAACP,MAAMQ,OAAO,CAAC,SAAUL,CAAC;IACnC,IAAIC,OAAO,CAACD,EAAE,KAAKM,WAAWC,QAAQC,GAAG,CAAC,oBAAoBR,IAAI;AACpE;AAEAS,OAAOC,OAAO,GAAG;IACfC,QAAQ;QACN;YACEC,MAAMzB,KAAKN,OAAO,CAACa,QAAQC,GAAG,IAAI,QAAQ,OAAON,IAAIwB,IAAI,GAAG;YAC5DC,QAAQ;YACRC,WAAW;YACXF,MAAM5B,UAAUI,IAAIwB,IAAI;YACxBZ,SAASA;QACX;QACA;YACEW,MAAMzB,KAAKN,OAAO,CAACa,QAAQC,GAAG,IAAI,QAAQ,OAAON,IAAIwB,IAAI,GAAG;YAC5DC,QAAQ;YACRD,MAAM5B,UAAUI,IAAIwB,IAAI;YACxBE,WAAW;YACXC,SAAS;gBAACjC,OAAOA,MAAM;aAAG;YAC1BkB,SAASA;QACX;KACD;IACDe,SAAS;QAACrC,UAAU;YAAEsC,SAAS;QAAM;QAAIpC;QAAWG;KAAM;AAC5D"}