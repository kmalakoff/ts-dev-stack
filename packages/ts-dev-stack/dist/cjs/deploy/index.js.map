{"version":3,"sources":["index.mjs"],"sourcesContent":["import Queue from 'queue-cb';\nimport { spawn } from 'tsds-lib';\nimport postdeploy from './post.mjs';\nimport predeploy from './pre.mjs';\n\nexport default function deploy(args, options, cb) {\n  const npArgs = [];\n  if (options['no-publish']) npArgs.push('--no-publish');\n  if (options.preview) npArgs.push('--preview');\n  if (!options.yarn) npArgs.push('--no-yarn');\n\n  const queue = new Queue(1);\n  queue.defer(predeploy.bind(null, args, options));\n  queue.defer(spawn.bind(null, 'np', npArgs, {}));\n  queue.defer(postdeploy.bind(null, args, options));\n  queue.await(cb);\n}\n\nmodule.exports.options = { alias: { 'no-publish': 'np', preview: 'p', yarn: 'y' } };\n"],"names":["deploy","args","options","cb","npArgs","push","preview","yarn","queue","Queue","defer","predeploy","bind","spawn","postdeploy","await","module","exports","alias"],"mappings":";;;;+BAKA;;;eAAwBA;;;8DALN;uBACI;2DACC;0DACD;;;;;;AAEP,SAASA,OAAOC,IAAI,EAAEC,OAAO,EAAEC,EAAE;IAC9C,IAAMC,SAAS,EAAE;IACjB,IAAIF,OAAO,CAAC,aAAa,EAAEE,OAAOC,IAAI,CAAC;IACvC,IAAIH,QAAQI,OAAO,EAAEF,OAAOC,IAAI,CAAC;IACjC,IAAI,CAACH,QAAQK,IAAI,EAAEH,OAAOC,IAAI,CAAC;IAE/B,IAAMG,QAAQ,IAAIC,gBAAK,CAAC;IACxBD,MAAME,KAAK,CAACC,YAAS,CAACC,IAAI,CAAC,MAAMX,MAAMC;IACvCM,MAAME,KAAK,CAACG,cAAK,CAACD,IAAI,CAAC,MAAM,MAAMR,QAAQ,CAAC;IAC5CI,MAAME,KAAK,CAACI,aAAU,CAACF,IAAI,CAAC,MAAMX,MAAMC;IACxCM,MAAMO,KAAK,CAACZ;AACd;AAEAa,OAAOC,OAAO,CAACf,OAAO,GAAG;IAAEgB,OAAO;QAAE,cAAc;QAAMZ,SAAS;QAAKC,MAAM;IAAI;AAAE"}