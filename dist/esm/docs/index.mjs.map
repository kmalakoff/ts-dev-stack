{"version":3,"sources":["index.js"],"sourcesContent":["const path = require('path');\nconst fs = require('fs');\nconst rimraf = require('rimraf');\nconst mkdirp = require('mkdirp');\nconst Queue = require('queue-cb');\nconst assign = require('just-extend');\nconst spawn = require('../lib/spawn');\nconst source = require('../lib/source');\n\nmodule.exports = function docs(_args, options, cb) {\n  const cwd = options.cwd || process.cwd();\n  const src = source(options);\n  const srcFolder = path.dirname(path.resolve(cwd, src));\n  const dest = path.resolve(process.cwd(), 'docs');\n  const tmpTsConfigPath = path.join(dest, 'tsconfig.json');\n\n  rimraf(dest, () => {\n    const queue = new Queue(1);\n    queue.defer(mkdirp.bind(null, dest));\n\n    queue.defer((cb) => {\n      let tsConfig = require(path.join(cwd, 'tsconfig.json'));\n      tsConfig = assign({}, tsConfig, { include: [srcFolder] });\n      fs.writeFile(tmpTsConfigPath, JSON.stringify(tsConfig), 'utf8', cb);\n    });\n    queue.defer(spawn.bind(null, 'typedoc', [src, '--tsconfig', tmpTsConfigPath, '--includeVersion', '--out', 'docs'], {}));\n    queue.await(cb);\n  });\n};\n"],"names":["path","require","fs","rimraf","mkdirp","Queue","assign","spawn","source","module","exports","docs","_args","options","cb","cwd","process","src","srcFolder","dirname","resolve","dest","tmpTsConfigPath","join","queue","defer","bind","tsConfig","include","writeFile","JSON","stringify","await"],"mappings":"AAAA,MAAMA,OAAOC,QAAQ;AACrB,MAAMC,KAAKD,QAAQ;AACnB,MAAME,SAASF,QAAQ;AACvB,MAAMG,SAASH,QAAQ;AACvB,MAAMI,QAAQJ,QAAQ;AACtB,MAAMK,SAASL,QAAQ;AACvB,MAAMM,QAAQN,QAAQ;AACtB,MAAMO,SAASP,QAAQ;AAEvBQ,OAAOC,OAAO,GAAG,SAASC,KAAKC,KAAK,EAAEC,OAAO,EAAEC,EAAE;IAC/C,MAAMC,MAAMF,QAAQE,GAAG,IAAIC,QAAQD,GAAG;IACtC,MAAME,MAAMT,OAAOK;IACnB,MAAMK,YAAYlB,KAAKmB,OAAO,CAACnB,KAAKoB,OAAO,CAACL,KAAKE;IACjD,MAAMI,OAAOrB,KAAKoB,OAAO,CAACJ,QAAQD,GAAG,IAAI;IACzC,MAAMO,kBAAkBtB,KAAKuB,IAAI,CAACF,MAAM;IAExClB,OAAOkB,MAAM;QACX,MAAMG,QAAQ,IAAInB,MAAM;QACxBmB,MAAMC,KAAK,CAACrB,OAAOsB,IAAI,CAAC,MAAML;QAE9BG,MAAMC,KAAK,CAAC,CAACX;YACX,IAAIa,WAAW1B,QAAQD,KAAKuB,IAAI,CAACR,KAAK;YACtCY,WAAWrB,OAAO,CAAC,GAAGqB,UAAU;gBAAEC,SAAS;oBAACV;iBAAU;YAAC;YACvDhB,GAAG2B,SAAS,CAACP,iBAAiBQ,KAAKC,SAAS,CAACJ,WAAW,QAAQb;QAClE;QACAU,MAAMC,KAAK,CAAClB,MAAMmB,IAAI,CAAC,MAAM,WAAW;YAACT;YAAK;YAAcK;YAAiB;YAAoB;YAAS;SAAO,EAAE,CAAC;QACpHE,MAAMQ,KAAK,CAAClB;IACd;AACF"}