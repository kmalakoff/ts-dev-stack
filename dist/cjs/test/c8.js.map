{"version":3,"sources":["c8.js"],"sourcesContent":["var path = require('path');\nvar rimraf = require('rimraf');\nvar Queue = require('queue-cb');\n\nvar link = require('../link');\nvar spawn = require('../lib/spawn');\n\nmodule.exports = function c8(_args, _options, cb) {\n  link(_args, _options, function (err, restore) {\n    if (err) return cb(err);\n\n    var queue = new Queue(1);\n    queue.defer(function (cb) {\n      rimraf(path.resolve(process.cwd(), 'coverage'), function () {\n        cb();\n      });\n    });\n    queue.defer(function (cb) {\n      var args = ['--config', path.join(__dirname, '..', '..', '..', 'assets', 'c8rc.json')];\n      args.push('mocha');\n      args = args.concat(_args.length ? _args.slice(-1) : ['test/unit/*.test.*']);\n      spawn('c8', args, { env: { NODE_OPTIONS: '--loader ts-swc-loaders' } }, cb);\n    });\n    queue.await(function (err) {\n      restore(function (err2) {\n        cb(err || err2);\n      });\n    });\n  });\n};\n"],"names":["path","require","rimraf","Queue","link","spawn","module","exports","c8","_args","_options","cb","err","restore","queue","defer","resolve","process","cwd","args","join","__dirname","push","concat","length","slice","env","NODE_OPTIONS","await","err2"],"mappings":";AAAA,IAAIA,OAAOC,QAAQ;AACnB,IAAIC,SAASD,QAAQ;AACrB,IAAIE,QAAQF,QAAQ;AAEpB,IAAIG,OAAOH,QAAQ;AACnB,IAAII,QAAQJ,QAAQ;AAEpBK,OAAOC,OAAO,GAAG,SAASC,GAAGC,KAAK,EAAEC,QAAQ,EAAEC,EAAE;IAC9CP,KAAKK,OAAOC,UAAU,SAAUE,GAAG,EAAEC,OAAO;QAC1C,IAAID,KAAK,OAAOD,GAAGC;QAEnB,IAAIE,QAAQ,IAAIX,MAAM;QACtBW,MAAMC,KAAK,CAAC,SAAUJ,EAAE;YACtBT,OAAOF,KAAKgB,OAAO,CAACC,QAAQC,GAAG,IAAI,aAAa;gBAC9CP;YACF;QACF;QACAG,MAAMC,KAAK,CAAC,SAAUJ,EAAE;YACtB,IAAIQ,OAAO;gBAAC;gBAAYnB,KAAKoB,IAAI,CAACC,WAAW,MAAM,MAAM,MAAM,UAAU;aAAa;YACtFF,KAAKG,IAAI,CAAC;YACVH,OAAOA,KAAKI,MAAM,CAACd,MAAMe,MAAM,GAAGf,MAAMgB,KAAK,CAAC,CAAC,KAAK;gBAAC;aAAqB;YAC1EpB,MAAM,MAAMc,MAAM;gBAAEO,KAAK;oBAAEC,cAAc;gBAA0B;YAAE,GAAGhB;QAC1E;QACAG,MAAMc,KAAK,CAAC,SAAUhB,GAAG;YACvBC,QAAQ,SAAUgB,IAAI;gBACpBlB,GAAGC,OAAOiB;YACZ;QACF;IACF;AACF"}