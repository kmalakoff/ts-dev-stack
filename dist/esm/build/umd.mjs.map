{"version":3,"sources":["umd.js"],"sourcesContent":["const fs = require('fs');\nconst path = require('path');\nconst Queue = require('queue-cb');\n\nconst rimraf2 = require('rimraf2');\nconst spawn = require('../lib/spawn');\nconst source = require('../lib/source');\n\nmodule.exports = function umd(_args, options, cb) {\n  const cwd = options.cwd || process.cwd();\n  const src = path.resolve(cwd, source(options));\n\n  options = { ...options };\n  options.type = 'umd';\n  options.sourceMaps = true;\n  options.dest = path.join(cwd, 'dist', 'umd');\n  rimraf2(options.dest, { disableGlob: true }, () => {\n    const queue = new Queue(1);\n    queue.defer(spawn.bind(null, 'rollup', ['--config', path.resolve(__dirname, '..', '..', 'esm', 'rollup-swc', 'index.mjs'), '--input', src], { cwd }));\n    queue.defer(fs.writeFile.bind(null, path.join(options.dest, 'package.json'), '{\"type\":\"commonjs\"}'));\n    queue.await(cb);\n  });\n};\n"],"names":["fs","require","path","Queue","rimraf2","spawn","source","module","exports","umd","_args","options","cb","cwd","process","src","resolve","type","sourceMaps","dest","join","disableGlob","queue","defer","bind","__dirname","writeFile","await"],"mappings":"AAAA,MAAMA,KAAKC,QAAQ;AACnB,MAAMC,OAAOD,QAAQ;AACrB,MAAME,QAAQF,QAAQ;AAEtB,MAAMG,UAAUH,QAAQ;AACxB,MAAMI,QAAQJ,QAAQ;AACtB,MAAMK,SAASL,QAAQ;AAEvBM,OAAOC,OAAO,GAAG,SAASC,IAAIC,KAAK,EAAEC,OAAO,EAAEC,EAAE;IAC9C,MAAMC,MAAMF,QAAQE,GAAG,IAAIC,QAAQD,GAAG;IACtC,MAAME,MAAMb,KAAKc,OAAO,CAACH,KAAKP,OAAOK;IAErCA,UAAU;QAAE,GAAGA,OAAO;IAAC;IACvBA,QAAQM,IAAI,GAAG;IACfN,QAAQO,UAAU,GAAG;IACrBP,QAAQQ,IAAI,GAAGjB,KAAKkB,IAAI,CAACP,KAAK,QAAQ;IACtCT,QAAQO,QAAQQ,IAAI,EAAE;QAAEE,aAAa;IAAK,GAAG;QAC3C,MAAMC,QAAQ,IAAInB,MAAM;QACxBmB,MAAMC,KAAK,CAAClB,MAAMmB,IAAI,CAAC,MAAM,UAAU;YAAC;YAAYtB,KAAKc,OAAO,CAACS,WAAW,MAAM,MAAM,OAAO,cAAc;YAAc;YAAWV;SAAI,EAAE;YAAEF;QAAI;QAClJS,MAAMC,KAAK,CAACvB,GAAG0B,SAAS,CAACF,IAAI,CAAC,MAAMtB,KAAKkB,IAAI,CAACT,QAAQQ,IAAI,EAAE,iBAAiB;QAC7EG,MAAMK,KAAK,CAACf;IACd;AACF"}