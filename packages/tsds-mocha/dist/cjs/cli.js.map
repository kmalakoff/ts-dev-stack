{"version":3,"sources":["cli.mjs"],"sourcesContent":["import exit from 'exit';\nimport getopts from 'getopts-compat';\nimport * as commands from './index.mjs';\ncommands['test:node'] = commands.testNode;\ncommands['test:browser'] = commands.testBrowser;\n\nexport default function cli(argv, name) {\n  if (argv.length === 0) {\n    console.log(`Command missing${name} ${argv.join(',')}`);\n    return exit(-1);\n  }\n\n  const command = commands[argv[0]];\n  if (!command) {\n    console.log(`Unrecognized command: ${argv.join(' ')}`);\n    return exit(-1);\n  }\n\n  const options = getopts(argv.slice(1), { stopEarly: true, ...(command.options || {}) });\n  const args = argv.slice(0, 1).concat(options._);\n  command(args.slice(1), options, (err) => {\n    if (err && err.message.indexOf('ExperimentalWarning') < 0) {\n      console.log(err.message);\n      return exit(err.code || -1);\n    }\n    exit(0);\n  });\n}\n"],"names":["cli","commands","testNode","testBrowser","argv","name","length","console","log","join","exit","command","options","getopts","slice","stopEarly","args","concat","_","err","message","indexOf","code"],"mappings":";;;;+BAMA;;;eAAwBA;;;2DANP;oEACG;6DACM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAC1BC,MAAQ,CAAC,YAAY,GAAGA,OAASC,QAAQ;AACzCD,MAAQ,CAAC,eAAe,GAAGA,OAASE,WAAW;AAEhC,SAASH,IAAII,IAAI,EAAEC,IAAI;IACpC,IAAID,KAAKE,MAAM,KAAK,GAAG;QACrBC,QAAQC,GAAG,CAAC,AAAC,kBAAyBJ,OAARC,MAAK,KAAkB,OAAfD,KAAKK,IAAI,CAAC;QAChD,OAAOC,IAAAA,aAAI,EAAC,CAAC;IACf;IAEA,IAAMC,UAAUV,MAAQ,CAACG,IAAI,CAAC,EAAE,CAAC;IACjC,IAAI,CAACO,SAAS;QACZJ,QAAQC,GAAG,CAAC,AAAC,yBAAuC,OAAfJ,KAAKK,IAAI,CAAC;QAC/C,OAAOC,IAAAA,aAAI,EAAC,CAAC;IACf;IAEA,IAAME,UAAUC,IAAAA,sBAAO,EAACT,KAAKU,KAAK,CAAC,IAAI;QAAEC,WAAW;OAAUJ,QAAQC,OAAO,IAAI,CAAC;IAClF,IAAMI,OAAOZ,KAAKU,KAAK,CAAC,GAAG,GAAGG,MAAM,CAACL,QAAQM,CAAC;IAC9CP,QAAQK,KAAKF,KAAK,CAAC,IAAIF,SAAS,SAACO;QAC/B,IAAIA,OAAOA,IAAIC,OAAO,CAACC,OAAO,CAAC,yBAAyB,GAAG;YACzDd,QAAQC,GAAG,CAACW,IAAIC,OAAO;YACvB,OAAOV,IAAAA,aAAI,EAACS,IAAIG,IAAI,IAAI,CAAC;QAC3B;QACAZ,IAAAA,aAAI,EAAC;IACP;AACF"}