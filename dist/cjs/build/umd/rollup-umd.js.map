{"version":3,"sources":["rollup-umd.js"],"sourcesContent":["const externals = require('rollup-plugin-node-externals');\nconst resolve = require('@rollup/plugin-node-resolve').default;\nconst terser = require('rollup-plugin-terser');\nconst swc = require('./swc');\nconst camelcase = require('lodash.camelcase');\nconst assign = require('just-extend');\n\nconst path = require('path');\nconst fs = require('fs');\nconst pkg = JSON.parse(fs.readFileSync(path.join(process.cwd(), 'package.json'), 'utf8'));\n\nconst DEPS = ['', 'dependencies', 'optionalDependencies', 'peerDependencies'];\nconst deps = assign.apply(\n  null,\n  DEPS.map((x) => pkg[x] || {})\n);\nconst globals = pkg.tsds ? pkg.tsds.globals || {} : {};\n\nObject.keys(deps).forEach((x) => {\n  if (globals[x] === undefined) console.log(`umd dependency ${x}is missing. Add a \"tsds\": { \"globals\": { \"\\${x}\": \"SomeName\" } } to your package.json`);\n});\n\nmodule.exports = {\n  output: [\n    {\n      file: path.resolve(process.cwd(), 'dist', 'umd', `${pkg.name}.js`),\n      format: 'umd',\n      sourcemap: true,\n      name: camelcase(pkg.name),\n      globals: globals,\n    },\n    {\n      file: path.resolve(process.cwd(), 'dist', 'umd', `${pkg.name}.min.js`),\n      format: 'umd',\n      name: camelcase(pkg.name),\n      sourcemap: true,\n      plugins: [terser.terser()],\n      globals: globals,\n    },\n  ],\n  plugins: [externals({ devDeps: false }), resolve(), swc()],\n};\n"],"names":["externals","require","resolve","default","terser","swc","camelcase","assign","path","fs","pkg","JSON","parse","readFileSync","join","process","cwd","DEPS","deps","apply","map","x","globals","tsds","Object","keys","forEach","undefined","console","log","module","exports","output","file","name","format","sourcemap","plugins","devDeps"],"mappings":";AAAA,IAAMA,YAAYC,QAAQ;AAC1B,IAAMC,UAAUD,QAAQ,+BAA+BE,OAAO;AAC9D,IAAMC,SAASH,QAAQ;AACvB,IAAMI,MAAMJ,QAAQ;AACpB,IAAMK,YAAYL,QAAQ;AAC1B,IAAMM,SAASN,QAAQ;AAEvB,IAAMO,OAAOP,QAAQ;AACrB,IAAMQ,KAAKR,QAAQ;AACnB,IAAMS,MAAMC,KAAKC,KAAK,CAACH,GAAGI,YAAY,CAACL,KAAKM,IAAI,CAACC,QAAQC,GAAG,IAAI,iBAAiB;AAEjF,IAAMC,OAAO;IAAC;IAAI;IAAgB;IAAwB;CAAmB;AAC7E,IAAMC,OAAOX,OAAOY,KAAK,CACvB,MACAF,KAAKG,GAAG,CAAC,SAACC;WAAMX,GAAG,CAACW,EAAE,IAAI,CAAC;;AAE7B,IAAMC,UAAUZ,IAAIa,IAAI,GAAGb,IAAIa,IAAI,CAACD,OAAO,IAAI,CAAC,IAAI,CAAC;AAErDE,OAAOC,IAAI,CAACP,MAAMQ,OAAO,CAAC,SAACL;IACzB,IAAIC,OAAO,CAACD,EAAE,KAAKM,WAAWC,QAAQC,GAAG,CAAC,AAAC,kBAAmB,OAAFR,GAAE;AAChE;AAEAS,OAAOC,OAAO,GAAG;IACfC,QAAQ;QACN;YACEC,MAAMzB,KAAKN,OAAO,CAACa,QAAQC,GAAG,IAAI,QAAQ,OAAO,AAAC,GAAW,OAATN,IAAIwB,IAAI,EAAC;YAC7DC,QAAQ;YACRC,WAAW;YACXF,MAAM5B,UAAUI,IAAIwB,IAAI;YACxBZ,SAASA;QACX;QACA;YACEW,MAAMzB,KAAKN,OAAO,CAACa,QAAQC,GAAG,IAAI,QAAQ,OAAO,AAAC,GAAW,OAATN,IAAIwB,IAAI,EAAC;YAC7DC,QAAQ;YACRD,MAAM5B,UAAUI,IAAIwB,IAAI;YACxBE,WAAW;YACXC,SAAS;gBAACjC,OAAOA,MAAM;aAAG;YAC1BkB,SAASA;QACX;KACD;IACDe,SAAS;QAACrC,UAAU;YAAEsC,SAAS;QAAM;QAAIpC;QAAWG;KAAM;AAC5D"}