{"version":3,"sources":["deploy.mjs"],"sourcesContent":["import Queue from 'queue-cb';\nimport { spawn } from 'tsds-lib';\n\nimport predeploy from './predeploy.mjs';\n\nfunction postdeploy(_args, options, cb) {\n  const cwd = options.cwd || process.cwd();\n\n  spawn('gh-pages', ['-d', 'docs'], { cwd }, cb);\n}\n\nexport default function deploy(args, options, cb) {\n  const npArgs = [];\n  if (options['no-publish']) npArgs.push('--no-publish');\n  if (options.preview) npArgs.push('--preview');\n  if (!options.yarn) npArgs.push('--no-yarn');\n\n  const queue = new Queue(1);\n  queue.defer(predeploy.bind(null, args, options));\n  queue.defer(spawn.bind(null, 'np', npArgs, {}));\n  queue.defer(postdeploy.bind(null, args, options));\n  queue.await(cb);\n}\n\nmodule.exports.options = { alias: { 'no-publish': 'np', preview: 'p', yarn: 'y' } };\n"],"names":["Queue","spawn","predeploy","postdeploy","_args","options","cb","cwd","process","deploy","args","npArgs","push","preview","yarn","queue","defer","bind","await","module","exports","alias"],"mappings":"AAAA,OAAOA,WAAW,WAAW;AAC7B,SAASC,KAAK,QAAQ,WAAW;AAEjC,OAAOC,eAAe,kBAAkB;AAExC,SAASC,WAAWC,KAAK,EAAEC,OAAO,EAAEC,EAAE;IACpC,MAAMC,MAAMF,QAAQE,GAAG,IAAIC,QAAQD,GAAG;IAEtCN,MAAM,YAAY;QAAC;QAAM;KAAO,EAAE;QAAEM;IAAI,GAAGD;AAC7C;AAEA,eAAe,SAASG,OAAOC,IAAI,EAAEL,OAAO,EAAEC,EAAE;IAC9C,MAAMK,SAAS,EAAE;IACjB,IAAIN,OAAO,CAAC,aAAa,EAAEM,OAAOC,IAAI,CAAC;IACvC,IAAIP,QAAQQ,OAAO,EAAEF,OAAOC,IAAI,CAAC;IACjC,IAAI,CAACP,QAAQS,IAAI,EAAEH,OAAOC,IAAI,CAAC;IAE/B,MAAMG,QAAQ,IAAIf,MAAM;IACxBe,MAAMC,KAAK,CAACd,UAAUe,IAAI,CAAC,MAAMP,MAAML;IACvCU,MAAMC,KAAK,CAACf,MAAMgB,IAAI,CAAC,MAAM,MAAMN,QAAQ,CAAC;IAC5CI,MAAMC,KAAK,CAACb,WAAWc,IAAI,CAAC,MAAMP,MAAML;IACxCU,MAAMG,KAAK,CAACZ;AACd;AAEAa,OAAOC,OAAO,CAACf,OAAO,GAAG;IAAEgB,OAAO;QAAE,cAAc;QAAMR,SAAS;QAAKC,MAAM;IAAI;AAAE"}