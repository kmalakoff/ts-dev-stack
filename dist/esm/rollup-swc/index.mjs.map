{"version":3,"sources":["index.mjs"],"sourcesContent":["import fs from 'fs';\nimport path from 'path';\nimport resolve from '@rollup/plugin-node-resolve';\nimport terser from '@rollup/plugin-terser';\nimport assign from 'just-extend';\nimport camelcase from 'lodash.camelcase';\nimport externals from 'rollup-plugin-node-externals';\nimport swc from './swc.mjs';\n\nconst pkg = JSON.parse(fs.readFileSync(path.join(process.cwd(), 'package.json'), 'utf8'));\n\nconst DEPS = ['', 'dependencies', 'optionalDependencies', 'peerDependencies'];\nconst deps = assign.apply(\n  null,\n  DEPS.map((x) => pkg[x] || {})\n);\nconst globals = pkg.tsds ? pkg.tsds.globals || {} : {};\n\nObject.keys(deps).forEach((x) => {\n  if (globals[x] === undefined) console.log(`umd dependency ${x}is missing. Add a \"tsds\": { \"globals\": { \"\\${x}\": \"SomeName\" } } to your package.json`);\n});\n\nexport default {\n  output: [\n    {\n      file: path.resolve(process.cwd(), 'dist', 'umd', `${pkg.name}.js`),\n      format: 'umd',\n      sourcemap: true,\n      name: camelcase(pkg.name),\n      globals: globals,\n    },\n    {\n      file: path.resolve(process.cwd(), 'dist', 'umd', `${pkg.name}.min.js`),\n      format: 'umd',\n      name: camelcase(pkg.name),\n      sourcemap: true,\n      plugins: [terser()],\n      globals: globals,\n    },\n  ],\n  plugins: [externals({ devDeps: false }), resolve(), swc()],\n};\n"],"names":["fs","path","resolve","terser","assign","camelcase","externals","swc","pkg","JSON","parse","readFileSync","join","process","cwd","DEPS","deps","apply","map","x","globals","tsds","Object","keys","forEach","undefined","console","log","output","file","name","format","sourcemap","plugins","devDeps"],"mappings":"AAAA,OAAOA,QAAQ,KAAK;AACpB,OAAOC,UAAU,OAAO;AACxB,OAAOC,aAAa,8BAA8B;AAClD,OAAOC,YAAY,wBAAwB;AAC3C,OAAOC,YAAY,cAAc;AACjC,OAAOC,eAAe,mBAAmB;AACzC,OAAOC,eAAe,+BAA+B;AACrD,OAAOC,SAAS,YAAY;AAE5B,MAAMC,MAAMC,KAAKC,KAAK,CAACV,GAAGW,YAAY,CAACV,KAAKW,IAAI,CAACC,QAAQC,GAAG,IAAI,iBAAiB;AAEjF,MAAMC,OAAO;IAAC;IAAI;IAAgB;IAAwB;CAAmB;AAC7E,MAAMC,OAAOZ,OAAOa,KAAK,CACvB,MACAF,KAAKG,GAAG,CAAC,CAACC,IAAMX,GAAG,CAACW,EAAE,IAAI,CAAC;AAE7B,MAAMC,UAAUZ,IAAIa,IAAI,GAAGb,IAAIa,IAAI,CAACD,OAAO,IAAI,CAAC,IAAI,CAAC;AAErDE,OAAOC,IAAI,CAACP,MAAMQ,OAAO,CAAC,CAACL;IACzB,IAAIC,OAAO,CAACD,EAAE,KAAKM,WAAWC,QAAQC,GAAG,CAAC,CAAC,eAAe,EAAER,EAAE,qFAAqF,CAAC;AACtJ;AAEA,eAAe;IACbS,QAAQ;QACN;YACEC,MAAM5B,KAAKC,OAAO,CAACW,QAAQC,GAAG,IAAI,QAAQ,OAAO,CAAC,EAAEN,IAAIsB,IAAI,CAAC,GAAG,CAAC;YACjEC,QAAQ;YACRC,WAAW;YACXF,MAAMzB,UAAUG,IAAIsB,IAAI;YACxBV,SAASA;QACX;QACA;YACES,MAAM5B,KAAKC,OAAO,CAACW,QAAQC,GAAG,IAAI,QAAQ,OAAO,CAAC,EAAEN,IAAIsB,IAAI,CAAC,OAAO,CAAC;YACrEC,QAAQ;YACRD,MAAMzB,UAAUG,IAAIsB,IAAI;YACxBE,WAAW;YACXC,SAAS;gBAAC9B;aAAS;YACnBiB,SAASA;QACX;KACD;IACDa,SAAS;QAAC3B,UAAU;YAAE4B,SAAS;QAAM;QAAIhC;QAAWK;KAAM;AAC5D,EAAE"}