{"version":3,"sources":["index.mjs"],"sourcesContent":["import fs from 'fs';\nimport path from 'path';\nimport resolve from '@rollup/plugin-node-resolve';\nimport terser from '@rollup/plugin-terser';\nimport camelcase from 'lodash.camelcase';\nimport externals from 'rollup-plugin-node-externals';\nimport swc from './swc.mjs';\n\nconst pkg = JSON.parse(fs.readFileSync(path.join(process.cwd(), 'package.json'), 'utf8'));\nconst globals = pkg.tsds ? pkg.tsds.globals || {} : {};\n\nconst DEPS = ['dependencies', 'optionalDependencies', 'peerDependencies'];\nDEPS.forEach((x) => {\n  const deps = pkg[x] || {};\n  for (const name in deps) {\n    if (globals[name] === undefined) console.log(`umd dependency ${name}is missing. Add a \"tsds\": { \"globals\": { \\\"${name}\\\": \"SomeName\" } } to your package.json`);\n  }\n});\n\nexport default {\n  output: [\n    {\n      file: path.resolve(process.cwd(), 'dist', 'umd', `${pkg.name}.js`),\n      format: 'umd',\n      sourcemap: true,\n      name: camelcase(pkg.name),\n      globals,\n    },\n    {\n      file: path.resolve(process.cwd(), 'dist', 'umd', `${pkg.name}.min.js`),\n      format: 'umd',\n      name: camelcase(pkg.name),\n      sourcemap: true,\n      plugins: [terser()],\n      globals,\n    },\n  ],\n  plugins: [externals({ devDeps: false,  builtinsPrefix: 'strip' }), resolve(), swc()],\n};\n"],"names":["pkg","JSON","parse","fs","readFileSync","path","join","process","cwd","globals","tsds","DEPS","forEach","x","deps","name","undefined","console","log","output","file","resolve","format","sourcemap","camelcase","plugins","terser","externals","devDeps","builtinsPrefix","swc"],"mappings":";;;;+BAmBA;;;eAAA;;;yDAnBe;2DACE;wEACG;mEACD;sEACG;gFACA;0DACN;;;;;;AAEhB,IAAMA,MAAMC,KAAKC,KAAK,CAACC,WAAE,CAACC,YAAY,CAACC,aAAI,CAACC,IAAI,CAACC,QAAQC,GAAG,IAAI,iBAAiB;AACjF,IAAMC,UAAUT,IAAIU,IAAI,GAAGV,IAAIU,IAAI,CAACD,OAAO,IAAI,CAAC,IAAI,CAAC;AAErD,IAAME,OAAO;IAAC;IAAgB;IAAwB;CAAmB;AACzEA,KAAKC,OAAO,CAAC,SAACC;IACZ,IAAMC,OAAOd,GAAG,CAACa,EAAE,IAAI,CAAC;IACxB,IAAK,IAAME,QAAQD,KAAM;QACvB,IAAIL,OAAO,CAACM,KAAK,KAAKC,WAAWC,QAAQC,GAAG,CAAC,AAAC,kBAAmEH,OAAlDA,MAAK,8CAAkD,OAALA,MAAK;IACxH;AACF;IAEA,WAAe;IACbI,QAAQ;QACN;YACEC,MAAMf,aAAI,CAACgB,OAAO,CAACd,QAAQC,GAAG,IAAI,QAAQ,OAAO,AAAC,GAAW,OAATR,IAAIe,IAAI,EAAC;YAC7DO,QAAQ;YACRC,WAAW;YACXR,MAAMS,IAAAA,wBAAS,EAACxB,IAAIe,IAAI;YACxBN,SAAAA;QACF;QACA;YACEW,MAAMf,aAAI,CAACgB,OAAO,CAACd,QAAQC,GAAG,IAAI,QAAQ,OAAO,AAAC,GAAW,OAATR,IAAIe,IAAI,EAAC;YAC7DO,QAAQ;YACRP,MAAMS,IAAAA,wBAAS,EAACxB,IAAIe,IAAI;YACxBQ,WAAW;YACXE,SAAS;gBAACC,IAAAA,qBAAM;aAAG;YACnBjB,SAAAA;QACF;KACD;IACDgB,SAAS;QAACE,IAAAA,kCAAS,EAAC;YAAEC,SAAS;YAAQC,gBAAgB;QAAQ;QAAIR,IAAAA,0BAAO;QAAIS,IAAAA,YAAG;KAAG;AACtF"}