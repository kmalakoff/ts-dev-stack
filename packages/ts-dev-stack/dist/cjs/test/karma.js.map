{"version":3,"sources":["karma.mjs"],"sourcesContent":["import path from 'path';\nimport Queue from 'queue-cb';\nimport { installPath, link, spawn } from 'tsds-lib';\n\nexport default function karma(args, options, cb) {\n  link(installPath(options), (_err, restore) => {\n    const queue = new Queue(1);\n    queue.defer((cb) => {\n      const tests = args.length ? args[0] : 'test/**/*.test.*';\n      spawn('karma', ['start', path.join(__dirname, '..', '..', '..', 'assets', 'karma.conf.js'), tests], {}, cb);\n    });\n    queue.await((err) => {\n      restore((err2) => {\n        cb(err || err2);\n      });\n    });\n  });\n}\n"],"names":["karma","args","options","cb","link","installPath","_err","restore","queue","Queue","defer","tests","length","spawn","path","join","__dirname","await","err","err2"],"mappings":";;;;+BAIA;;;eAAwBA;;;2DAJP;8DACC;uBACuB;;;;;;AAE1B,SAASA,MAAMC,IAAI,EAAEC,OAAO,EAAEC,EAAE;IAC7CC,IAAAA,aAAI,EAACC,IAAAA,oBAAW,EAACH,UAAU,SAACI,MAAMC;QAChC,IAAMC,QAAQ,IAAIC,gBAAK,CAAC;QACxBD,MAAME,KAAK,CAAC,SAACP;YACX,IAAMQ,QAAQV,KAAKW,MAAM,GAAGX,IAAI,CAAC,EAAE,GAAG;YACtCY,IAAAA,cAAK,EAAC,SAAS;gBAAC;gBAASC,aAAI,CAACC,IAAI,CAACC,WAAW,MAAM,MAAM,MAAM,UAAU;gBAAkBL;aAAM,EAAE,CAAC,GAAGR;QAC1G;QACAK,MAAMS,KAAK,CAAC,SAACC;YACXX,QAAQ,SAACY;gBACPhB,GAAGe,OAAOC;YACZ;QACF;IACF;AACF"}