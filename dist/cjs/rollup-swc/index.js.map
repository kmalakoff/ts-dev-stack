{"version":3,"sources":["index.mjs"],"sourcesContent":["import path from 'path';\nimport fs from 'fs';\nimport externals from 'rollup-plugin-node-externals';\nimport resolve from '@rollup/plugin-node-resolve';\nimport terser from '@rollup/plugin-terser';\nimport camelcase from 'lodash.camelcase';\nimport assign from 'just-extend';\nimport swc from './swc.mjs';\n\nconst pkg = JSON.parse(fs.readFileSync(path.join(process.cwd(), 'package.json'), 'utf8'));\n\nconst DEPS = ['', 'dependencies', 'optionalDependencies', 'peerDependencies'];\nconst deps = assign.apply(\n  null,\n  DEPS.map((x) => pkg[x] || {})\n);\nconst globals = pkg.tsds ? pkg.tsds.globals || {} : {};\n\nObject.keys(deps).forEach((x) => {\n  if (globals[x] === undefined) console.log(`umd dependency ${x}is missing. Add a \"tsds\": { \"globals\": { \"\\${x}\": \"SomeName\" } } to your package.json`);\n});\n\nexport default {\n  output: [\n    {\n      file: path.resolve(process.cwd(), 'dist', 'umd', `${pkg.name}.js`),\n      format: 'umd',\n      sourcemap: true,\n      name: camelcase(pkg.name),\n      globals: globals,\n    },\n    {\n      file: path.resolve(process.cwd(), 'dist', 'umd', `${pkg.name}.min.js`),\n      format: 'umd',\n      name: camelcase(pkg.name),\n      sourcemap: true,\n      plugins: [terser()],\n      globals: globals,\n    },\n  ],\n  plugins: [externals({ devDeps: false }), resolve(), swc()],\n};\n"],"names":["pkg","JSON","parse","fs","readFileSync","path","join","process","cwd","DEPS","deps","assign","apply","map","x","globals","tsds","Object","keys","forEach","undefined","console","log","output","file","resolve","name","format","sourcemap","camelcase","plugins","terser","externals","devDeps","swc"],"mappings":";;;;+BAsBA;;;eAAA;;;2DAtBiB;yDACF;gFACO;wEACF;mEACD;sEACG;iEACH;0DACH;;;;;;AAEhB,IAAMA,MAAMC,KAAKC,KAAK,CAACC,WAAE,CAACC,YAAY,CAACC,aAAI,CAACC,IAAI,CAACC,QAAQC,GAAG,IAAI,iBAAiB;AAEjF,IAAMC,OAAO;IAAC;IAAI;IAAgB;IAAwB;CAAmB;AAC7E,IAAMC,OAAOC,mBAAM,CAACC,KAAK,CACvB,MACAH,KAAKI,GAAG,CAAC,SAACC;WAAMd,GAAG,CAACc,EAAE,IAAI,CAAC;;AAE7B,IAAMC,UAAUf,IAAIgB,IAAI,GAAGhB,IAAIgB,IAAI,CAACD,OAAO,IAAI,CAAC,IAAI,CAAC;AAErDE,OAAOC,IAAI,CAACR,MAAMS,OAAO,CAAC,SAACL;IACzB,IAAIC,OAAO,CAACD,EAAE,KAAKM,WAAWC,QAAQC,GAAG,CAAC,AAAC,kBAAmB,OAAFR,GAAE;AAChE;IAEA,WAAe;IACbS,QAAQ;QACN;YACEC,MAAMnB,aAAI,CAACoB,OAAO,CAAClB,QAAQC,GAAG,IAAI,QAAQ,OAAO,AAAC,GAAW,OAATR,IAAI0B,IAAI,EAAC;YAC7DC,QAAQ;YACRC,WAAW;YACXF,MAAMG,IAAAA,wBAAS,EAAC7B,IAAI0B,IAAI;YACxBX,SAASA;QACX;QACA;YACES,MAAMnB,aAAI,CAACoB,OAAO,CAAClB,QAAQC,GAAG,IAAI,QAAQ,OAAO,AAAC,GAAW,OAATR,IAAI0B,IAAI,EAAC;YAC7DC,QAAQ;YACRD,MAAMG,IAAAA,wBAAS,EAAC7B,IAAI0B,IAAI;YACxBE,WAAW;YACXE,SAAS;gBAACC,IAAAA,qBAAM;aAAG;YACnBhB,SAASA;QACX;KACD;IACDe,SAAS;QAACE,IAAAA,kCAAS,EAAC;YAAEC,SAAS;QAAM;QAAIR,IAAAA,0BAAO;QAAIS,IAAAA,YAAG;KAAG;AAC5D"}